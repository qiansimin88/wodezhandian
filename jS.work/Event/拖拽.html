<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
#div1 {background:red;width:200px;height:200px;position:absolute}
</style>
<script>
	window.onload=function()
	{
		var oDiv=document.getElementById('div1');
		oDiv.onmousedown=function(ev)                        //鼠标按下算  间距
															//在鼠标按下后 加上鼠标移动 算oDiv的  left 和TOP即可最后鼠标移开；
		{
			var oEvent=ev||event;
			
			var disX=oEvent.clientX-oDiv.offsetLeft;
			var disY=oEvent.clientY-oDiv.offsetTop;
			document.onmousemove=function(ev)
			{
				var oEvent=ev||event;
				var L=oEvent.clientX-disX;
				var H=oEvent.clientY-disY;
				if(L<0)
				{
				  L=0;
				}
				else if(L>document.documentElement.clientWidth-oDiv.offsetWidth)
				{
					L=document.documentElement.clientWidth-oDiv.offsetWidth
				}
				
				
				
				
				if(H<0)
				{
					H=0	
				}
				else if(H>document.documentElement.clientHeight-oDiv.offsetHeight)
				{
					H=document.documentElement.clientHeight-oDiv.offsetHeight;	
				}
				
					oDiv.style.left=L+'px'	
					oDiv.style.top=H+'px';	
				
			};
			document.onmouseup=function()
			{
					document.onmousemove=null;
					document.onmouseup=null;
			};
			return false
		};	
	}
</script>
</head>

<body>
<div id="div1">
</div>
</body>
</html>
